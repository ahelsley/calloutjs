var l=window;HTMLElement.prototype.instantiate=function(b,c,f){b=m(b,c,f,this);n(b);return b};
function m(b,c,f,a){var e=[];b=b?p(b):b;if(!b)return e;var d=b.getAttribute("foreach");if("#"===d.charAt(0)){debugger;d=d.substring(1)}f=f||[new q(null,l)];a=a?p(a):b.s||b.parentNode;void 0===c&&(c=r(b,f));if(void 0===c)return e;Array.isArray(c)||(c=Array(c));void 0===c.c&&(c.c=[]);c.c.l(a);a&&(void 0===a.j&&(a.j=[]),a.j.l(c.p||c));a&&void 0===a.a&&(a.a=c);for(var g=0,h=0;h<c.length;h++){var k=c[h];d&&(f[0].f[d]=k);if("object"!==typeof k){switch(typeof k){case "string":c[h]=new String(k);break;case "number":c[h]=
new Number(k);break;case "boolean":c[h]=new Boolean(k)}k=c[h]}k=s(b,k,f,c,h);d&&delete f[0].f[d];k&&(e.push(k),a&&20<e.length-g&&(g+=t(e.slice(g),a)))}a&&t(e.slice(g),a);return e}
function s(b,c,f,a,e){var d=b.cloneNode(!0);d.d=b;b.k||(b.k=[]);b.k.push(d);d.a=c;"object"===typeof c&&(c.c&&c.c.push||(c.c=[]),c.c.l(d));u.bind&&(d.r=u.bind(d));d.b=a;d.g=e;f=f||[new q(null,{})];f.unshift(new q({f:f[0].f,a:c,d:b,i:d,b:a,g:e}));b=v.apply(d,[f,d]);if(w(d,"pre")){d.h=d.h||[];for(c=0;c<b.length;c++)a=b[c],(e=r(a,f))&&m(a.m||a,e,f,a.parentNode);w(d,"post")||(d=void 0)}else d=void 0;f.shift();return d}
function t(b,c){Array.isArray(b)||(b=[b]);for(var f=0,a=0;a<b.length;a++)if(!b[a].parentNode){var e=b[a];e.removeAttribute("foreach");e.removeAttribute("in");e.removeAttribute("of");e.removeAttribute("reapply");e.removeAttribute("to");e.className=e.className.replace(/\btemplate\b/g," ").trim();c.appendChild(b[a]);f++}return f}
function u(){this.a&&Array.isArray(this.a.c)&&this.a.c.t(this);var b=s(this.d,this.a,this.q||[new q(null,{})],this.b,this.g);this.parentNode&&this.parentNode.replaceChild(b,this)}
function w(b,c){if(b[c]&&"function"===typeof b[c])return b[c].call(b);var f=b.d;if(f.hasAttribute(c)){var a=f.getAttribute(c);f.removeAttribute(c);try{f[c]=new Function("nullEvent",a),console.log("installed handler '"+c+"': "+a)}catch(e){console.log("exception while installing handler '"+c+"': "+a+"\n\nException: "+e)}}!b[c]&&f[c]&&(b[c]=f[c].bind(b));return b[c]?b[c].call(b):!0}function n(b){for(var c=0;c<b.length;c++){var f=b[c];f.n||(w(f,"load"),f.n=!0);f.h&&0<f.h.length&&n(f.h)}}
function r(b,c){var f=!1,a=!1,e=!1,d=b.getAttribute("in")||b.getAttribute("of")||b.getAttribute("foreach"),g=[];b.hasAttribute("reapply")&&(c=c.slice(0,1));if("string"===typeof d){for(;"*"===d.charAt(0)||"^"===d.charAt(0)||"$"===d.charAt(0);)"*"===d.charAt(0)?f=!0:"^"===d.charAt(0)?a=f=!0:"$"===d.charAt(0)&&(e=!0),d=d.substring(1);g=""===d&&Array.isArray(c.a)?c.a:x(d,c)}else"object"===typeof d?g=d:void 0!==typeof d&&(g=[d]);if(g&&g.debug)debugger;if(f&&!Array.isArray(g)){f=Object.keys(g)||[];e&&f.sort();
d=[];d.u=e;for(e=0;e<f.length;e++)a?d.push({name:f[e],value:g[f[e]]}):d.push(g[f[e]]);d.p=g;g=d}else e&&g.sort();return g}
function v(b,c){for(var f=[],a=void 0,e=void 0,d=0;d<this.attributes.length;d++){var g=this.attributes[d];g.value=y(g.value,b);"id"===g.name?a=g:"genid"===g.name&&(e=g);if("#"===g.name.charAt(0)){debugger;this.removeAttribute(g.name)}else":"===g.name.charAt(0)&&(this.setAttribute(g.name.substring(1),g.value),this.removeAttribute(g.name))}a&&this.removeAttribute(a.name);e&&(this.setAttribute("id",e.value),this.removeAttribute(e.name));for(d=0;d<this.childNodes.length;d++)switch(a=this.childNodes[d],
a.nodeType){case Node.TEXT_NODE:a.data=y(a.data,b);break;case Node.ELEMENT_NODE:if(a.hasAttribute("foreach"))f.push(a),a.hasAttribute("id")&&(e=y(a.getAttribute("id"),b),a.setAttribute("id",e));else if(a.hasAttribute("reapply")){if(!a.m){e=a.getAttribute("reapply");g=b[0].d;if(""!==e&&"."!==e)for(d=0;d<b.length;d++){var h=b[d].d;if(h.getAttribute("foreach")===e){g=h;break}}a.m=g;a.setAttribute("foreach",e);a.setAttribute("in",a.getAttribute("to"))}f.push(a)}else e=v.apply(a,arguments),f=f.concat(e),
a.i=c;break;case Node.ATTRIBUTE_NODE:break;case Node.ENTITY_NODE:break;case Node.ENTITY_REFERENCE_NODE:break;default:this.removeChild(a)}return f}var z=/@{([\[\]\/<>()*.:a-zA-Z0-9_,@#$]+?)}/g;function y(b,c){for(var f=[],a=0,e;e=z.exec(b);){var d=e.index,g=e.index+e[0].length;e=x(e[1],c);f.push(b.substring(a,d));f.push(e);a=g}return f.join("")+b.substring(a)}
function x(b,c){if(void 0===c[0].e[b]){var f=c[0].e,a;a:{a=b;var e=c.length-1,d=a.search(/[^.]/);0>d&&(d=0);a=a.substring(d);0<d&&d--;"/"===a.charAt(0)&&(d=e,a=a.substring(1));a=a.split(".");for(e=d;e<c.length;e++)if(d=c[e].o(a[0]),void 0!==d){for(e=1;e<a.length;e++)if(d=d[a[e]],e<a.length-1&&(void 0===d||null===d)){a=void 0;break a}a=d;break a}a=void 0}f[b]=a}return c[0].e[b]}
function q(b,c){if(void 0!==b&&"object"===typeof b)for(var f in b)b.hasOwnProperty(f)&&(this[f]=b[f]);this.e={};this.f=this.f||{};this.a=this.a||c;this.d=this.d;this.i=this.i;this.b=this.b;this.g=this.g;this.o=function(a){if(void 0!==a){if(1===a.length)switch(a){case "@":return 1+this.g;case "$":return A(this.b.length);case "#":return this.b?this.b.length:void 0;case ",":return this.b&&this.g<this.b.length?",":""}else if("length"===a||"size"===a||"#"===a)return this.b.length;return this.e[a]||(this.e[a]=
this.a[a])||(this.e[a]=this.f[a])}}}window.Frame=q;function p(b){return"string"!==typeof b?b:l[b]?l[b]:document.getElementById(b)}Object.defineProperty(Number.prototype,"$",{get:function(){return A(this.valueOf())}});Object.defineProperty(Array.prototype,"$",{get:function(){return A(this.length)}});Object.defineProperty(Array.prototype,"#",{get:function(){return this.length}});Object.defineProperty(Array.prototype,"size",{get:function(){return this.length}});
Array.prototype.removeAll=function(b){for(var c=this.indexOf(b);0<=c;c=this.indexOf(b))this.splice(c,1)};Array.prototype.push$=function(b){0>this.indexOf(b)&&this.push(b)};function A(b){return void 0!==b&&1!=b?"s":""};
